# 🔑 eBird API Key 管理指南

## 📋 功能概述

本程序已集成完整的eBird API Key管理功能，让您可以安全地保存和管理您的API Key，无需每次使用时重复输入。

## 🎯 主要功能

### 1. 自动API Key管理
- ✅ 首次启动时引导用户设置API Key
- ✅ 自动保存API Key到配置文件 (`ebird_config.json`)
- ✅ 每次启动时自动加载已保存的API Key
- ✅ API Key有效性验证
- ✅ 安全的配置文件存储

### 2. 用户友好的设置流程
- 📝 详细的API Key申请指南
- 🔍 实时API Key验证
- 💾 自动保存功能
- 🔄 支持更换和删除API Key

### 3. 两种访问方式

#### 方式一：通过主菜单
运行 `main.py` 或 `eBirdTracker` 可执行文件：
```
📋 请选择功能:
1. 🎯 鸟类追踪器 - 支持单一或多物种
2. 🔑 API Key管理  ← 选择这个选项
3. 📁 打开输出文件夹
4. ❓ 使用帮助
0. 退出程序
```

#### 方式二：直接运行追踪器
运行 `bird_tracker_unified.py` 时，程序会自动：
1. 检查是否有保存的API Key
2. 验证API Key有效性
3. 如果没有或无效，引导用户设置

## 📖 详细使用指南

### 首次设置API Key

1. **运行程序**
   ```bash
   ./eBirdTracker
   # 或
   python main.py
   ```

2. **选择API Key管理**
   - 在主菜单选择 "2. 🔑 API Key管理"

3. **按照指引设置**
   ```
   🔑 API Key 管理
   ==============================
   
   ⚠️ 尚未设置API Key
   
   请选择操作:
   1. 输入API Key
   2. 查看API Key申请指南
   0. 返回主菜单
   ```

### API Key申请详细步骤

#### 第一步：访问eBird网站
- 网址：https://ebird.org
- 点击右上角 "Sign In" 登录或创建账户

#### 第二步：申请API Key
- 直接访问：https://ebird.org/api/keygen
- 或：页面底部 "Developers" → "Request an API Key"

#### 第三步：填写申请表单
| 字段 | 建议内容 |
|------|----------|
| **First Name** | 您的名字 |
| **Last Name** | 您的姓氏 |
| **Email** | 与eBird账户相同的邮箱 |
| **Intended Use** | 选择 "Personal Use" 或 "Research/Education" |
| **Project Title** | "个人观鸟记录查询" 或 "Bird Tracking Tool" |
| **Project Description** | "用于查询和分析特定地区的观鸟记录，进行观鸟路线规划" |
| **Estimated monthly requests** | 选择 "1-100" 或 "101-1000" |

#### 第四步：等待审批
- 通常几分钟到几小时内即可收到邮件
- 检查垃圾邮件文件夹
- API Key格式类似：`abc123def456`

### 管理已有API Key

运行程序选择API Key管理后：

```
🔑 API Key 管理
==============================

当前API Key: abc1...f456
设置时间: 2025-08-25 06:25

请选择操作:
1. 查看完整API Key
2. 更换API Key
3. 删除API Key
4. 查看API Key申请指南
0. 返回主菜单
```

#### 功能说明：
- **查看完整API Key**：显示完整的API Key字符串
- **更换API Key**：输入新的API Key，包含验证功能
- **删除API Key**：删除保存的API Key
- **查看申请指南**：显示详细的申请步骤

## ⚠️ 重要提醒

### 安全须知
- ❌ **切勿分享您的API Key**
- ❌ **不要在公开场所展示API Key**
- ✅ **定期检查API Key是否有效**
- ✅ **遵守eBird API使用条款**

### 使用限制
- 📊 **频率限制**：每小时100-1000次请求（根据申请时的等级）
- 🚫 **禁止商业用途**：仅限个人和教育研究使用
- 📝 **合理使用**：避免过度频繁的请求

### 故障排除

#### API Key验证失败
```
❌ API Key验证失败
```
**解决方案：**
1. 检查API Key是否输入正确
2. 确认网络连接正常
3. 验证API Key是否过期
4. 重新申请新的API Key

#### 配置文件问题
```
⚠️ 配置文件损坏，将重新创建
```
**解决方案：**
- 程序会自动重新创建配置文件
- 需要重新输入API Key

#### 网络连接问题
```
❌ 网络连接失败: [错误信息]
```
**解决方案：**
1. 检查网络连接
2. 确认防火墙设置
3. 稍后重试

## 📂 配置文件说明

### 配置文件位置
- 文件名：`ebird_config.json`
- 位置：程序运行目录

### 配置文件格式
```json
{
    "api_key": "您的API Key",
    "setup_date": "2025-08-25T06:25:28.123456"
}
```

### 手动管理配置文件
- ✅ **备份**：可以复制 `ebird_config.json` 作为备份
- ✅ **迁移**：可以将配置文件复制到新环境
- ❌ **手动编辑**：不建议手动编辑，使用程序内置功能

## 🆘 获取帮助

### 常见问题
1. **如何知道API Key是否有效？**
   - 程序每次启动都会自动验证
   - 在API Key管理中可以手动验证

2. **可以使用多个API Key吗？**
   - 每次只能使用一个API Key
   - 可以随时更换

3. **忘记API Key怎么办？**
   - 在程序中查看完整API Key
   - 或重新申请新的API Key

### 联系支持
- 📧 eBird API问题：联系 eBird 官方支持
- 🐛 程序问题：检查网络连接和配置文件

---

*最后更新：2025-08-25*
*版本：TuiBird Tracker V4.0*