# eBird CLI 追踪器

🦅 一个专为观鸟爱好者设计的命令行工具，集成eBird数据查询与地理位置追踪功能。

## 📋 目录

- [功能特性](#-功能特性)
- [环境要求](#-环境要求)
- [快速开始](#-快速开始)
- [功能说明](#-功能说明)
- [使用示例](#-使用示例)
- [输出文件](#-输出文件)
- [故障排除](#-故障排除)

## ✨ 功能特性

- 🎯 **统一鸟类追踪器** - 支持单一和多物种模式，智能选择
- 🌍 **区域鸟种查询** - 根据区域输入，显示所有鸟种记录 🎆
- 🌍 **地理位置支持** - 支持地名和坐标搜索
- 📝 **报告生成** - 自动生成Markdown格式的观鸟报告
- 🌏 **中英文支持** - 支持中英文鸟种名称搜索
- ⚙️ **配置保存** - 支持保存和加载搜索配置

## 🔧 环境要求

- **无需安装任何软件**：已打包为独立可执行文件
- 网络连接（用于访问eBird API）
- 操作系统：macOS（已测试）、Linux（兼容）

## 🚀 快速开始

### 📦 方式一：用户分发版（推荐）

**下载分发包**: `TUI-eBirder-beta.zip`

```bash
# 1. 解压分发包
unzip TUI-eBirder-beta.zip
cd TUI-eBirder-beta/

# 2. 运行安装脚本（一键设置）
./install.sh

# 3. 启动程序
./TuieBirdTracker
```

**就这么简单！** ✨ 无需安装Python或任何依赖。

### 🛠️ 方式二：开发者版本

**适用于**: 开发者、源码定制需求

```bash
# 1. 确保有以下文件：
# - main.py
# - bird_tracker_unified.py
# - bird_region_query.py
# - ebird_reference.sqlite

# 2. 安装依赖
pip3 install -r requirements.txt

# 3. 启动程序
python3 main.py
```

## 📖 功能说明

### 🎯 统一鸟类追踪器
- **用途**: 集成单一和多物种功能，智能选择模式
- **特点**: 
  - 支持在程序内选择追踪模式（单一或多物种）
  - 统一的用户界面和操作流程
  - 支持保存和加载搜索配置
  - 提供观测地点、时间、频率等详细信息
  - 生成专业的Markdown格式观鸟报告
  - 支持地理位置过滤和多种搜索模式

### 🌍 区域鸟种查询 🎆
- **用途**: 根据用户输入的区域，显示该区域内所有鸟种的最近观测记录
- **特点**:
  - 支持地名和GPS坐标输入
  - 自动地理定位（基于IP地址）
  - 可调节搜索半径（1-50公里）
  - 生成“鸟类摄影作战简报”格式报告
  - 按鸟种分类显示观测地点、时间、数量等信息
  - 适合快速了解某个区域的鸟类分布情况

## 💡 使用示例

### 启动主程序
```bash
python3 main.py
```

主界面菜单：
```
📋 请选择功能:
1. 🎯 鸟类追踪器 - 支持单一或多物种
2. 🌍 区域鸟种查询 - 根据区域显示所有鸟种记录
3. 🔑 API Key管理
4. 📁 打开输出文件夹
5. ❓ 使用帮助
0. 退出程序
```

### 鸟种搜索示例
- 中文搜索：`白头鹎`、`麻雀`
- 英文搜索：`sparrow`、`magpie`
- 模糊搜索：`白头`、`spar`

### 地点输入示例
- 城市名：`北京`、`上海`、`杭州`
- 具体地点：`北京大学`、`西湖`
- 坐标：`39.9042, 116.4074`

## 📁 输出文件

程序会在 `output/` 目录下生成报告：

```
output/
├── 2025-08-24/
│   ├── Tracker_白头鹎_2025-08-24_143022.md
│   └── Birding_Briefing_2025-08-24_143855.md
```

### 报告类型
- `Tracker_*.md` - 单一物种追踪报告
- `Birding_Briefing_*.md` - 多物种分析报告 / 区域鸟种查询报告

## 🛠 故障排除

### 常见问题

#### 1. 模块导入错误
```
ModuleNotFoundError: No module named 'geocoder'
```
**解决方案**: 运行 `pip3 install -r requirements.txt`

#### 2. 数据库文件缺失
```
❌ 错误: 未找到数据库文件 'ebird_reference.sqlite'
```
**解决方案**: 确保 `ebird_reference.sqlite` 文件在程序目录中

#### 3. 网络连接问题
```
❌ 网络请求 eBird API 时出错
```
**解决方案**: 检查网络连接，确保可以访问 api.ebird.org

#### 4. 权限问题
```
Permission denied
```
**解决方案**: 确保有输出目录的写入权限

### 调试模式
如果遇到问题，可以开启详细输出：
```bash
python3 -v main.py  # 开启详细模式
```

## 📞 技术支持

如果遇到其他问题：
1. 检查Python版本是否为3.8+
2. 确保所有依赖包已正确安装
3. 验证数据库文件完整性
4. 检查网络连接状态

## 📝 更新日志

### v2.1 (2025-08-25)
- 🎆 **新增功能** - 区域鸟种查询功能
- 🌍 **区域查询** - 根据用户输入区域，显示所有鸟种记录
- 📝 **作战简报** - 生成“鸟类摄影作战简报”格式报告
- 📀 **智能定位** - 支持IP地址自动定位和手动输入
- 📋 **菜单更新** - 主菜单新增区域查询选项

### v2.0 (2025-01-15)
- 💫 **项目简化** - 删除单独的程序文件，使用统一追踪器
- 🛠️ **程序优化** - 简化主菜单和操作流程
- 📦 **构建优化** - 简化打包脚本，减小打包体积
- 📚 **文档更新** - 更新使用说明反映新架构

### v1.1 (2025-01-15)
- ✨ 新增统一追踪器，集成单一和多物种功能
- 🔄 智能选择追踪模式，提升用户体验
- 🛠️ 统一API调用和数据处理逻辑
- 📚 更新文档和构建脚本

### v1.0 (2025-08-24)
- ✅ 移除GUI和菜单栏相关功能
- ✅ 优化为纯CLI程序
- ✅ 添加统一的入口程序
- ✅ 简化依赖，移除GUI库
- ✅ 增加安装脚本和使用文档

---

**享受观鸟的乐趣！** 🐦✨